import React, { useEffect, useState } from 'react'
import Image from 'next/Image'
import Head from 'next/head'
import headImg from '../public/Images/newArrivals.png'
import styles from '../styles/NewArrivals.module.css'
import Product from '../components/product'
import axios from 'axios'

export async function getStaticProps() {
  const res = await axios.get(`${process.env.NEXT_PUBLIC_HOST}newArrivals/`);
  const data = res.data;
  return {
    props: {
      data,
    },
  };
}



function NewArrivals(props) {
  const slides = props.data
  return (
    <>
      <Head>
        <title>Earthie Fashion - New Arrivals</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <div className="row">
        <div className="col-12 h-25" >
          <Image src={headImg} fill alt='New Arrivals' className={styles.headerImg + ' '} />
        </div>

        <div className="col-12">

          <div className="container mt-3">
            <div className="row">
              {slides.map((slide) => {
                if (slide.is_published) {
                  return (
                    <div className="col-12 col-lg-3 col-md-4 col-sm-6 my-3 d-flex justify-content-center" key={slide.id}>
                      <Product productName={slide.prodcutName} productPrice={slide.productPrice} productImage={slide.productImage} />
                    </div>
                  )
                }
              })}
            </div>
          </div>
        </div>
      </div>
    </>
  )
}

export default NewArrivals